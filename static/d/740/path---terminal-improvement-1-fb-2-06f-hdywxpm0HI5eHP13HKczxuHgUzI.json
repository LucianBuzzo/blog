{"data":{"site":{"siteMetadata":{"title":"Lucian Buzzo","author":"Lucian Buzzo"}},"markdownRemark":{"id":"2103f848-10f5-504d-865c-755e6d88dae7","excerpt":"I spend a lot of my time at work using Terminal. Connecting to servers,\nmanaging version control and editing files (I’m a  Vim  user…","html":"<p>I spend a lot of my time at work using Terminal. Connecting to servers,\nmanaging version control and editing files (I’m a <a href=\"https://jaxbot.me/articles/why-i-use-vim\">Vim</a> user). Learning how\nto use Terminal can be really powerful for a full stack developer, but opening\nup the app and seeing the default interface doesn’t exactly shout <em>“Use me! I’m\nawesome!”</em>.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b1027abf1774085c3a3eec787d1911db/95abb/standard-prompt.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 487px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.4435318275154%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAYElEQVQY062RUQoAIQhEu4tmWeCP1P1vZigE+7G7sLEfD0ZkBgcTEdkTOWd729+RENEAILjqHfY1NKmqzTkDEbExRmhmPrvQja21oNYaQb13K6WcBbrJqzqu93xc+e+nLKn2rd0cti1sAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Standard bash prompt\"\n        title=\"\"\n        src=\"/static/b1027abf1774085c3a3eec787d1911db/95abb/standard-prompt.png\"\n        srcset=\"/static/b1027abf1774085c3a3eec787d1911db/dd84a/standard-prompt.png 148w,\n/static/b1027abf1774085c3a3eec787d1911db/95201/standard-prompt.png 295w,\n/static/b1027abf1774085c3a3eec787d1911db/95abb/standard-prompt.png 487w\"\n        sizes=\"(max-width: 487px) 100vw, 487px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>It’s pretty drab (even if your using the snazzy <em>Pro</em> theme shown above), the\nfont is spidery, pixelated and hard to read and the information being\nshown to me in the prompt is pretty useless as well.\nClearly this kind of display is potentially useful to some people - but it\nis doing nothing for me 99% of the time apart from causing me to make a sort of\n“bleugghh” noise at the back of my throat.</p>\n<p>After my first few tussles with Terminal I saw that it was a great (some may say\nessential) tool, despite the unappealing interface.\nI decided to spend the morning making a few teaks, and sat down in front of my\ncomputer with 3 goals in mind.</p>\n<ol>\n<li>Make the colour more interesting.</li>\n<li>Use a more stylish typeface that’s hopefully more legible.</li>\n<li>Display a more informative and useful prompt.</li>\n</ol>\n<p>This was many years ago and “a few teaks” has turned into a weird and interesting\nadventure into the land of command line customisation that I doubt will ever end.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cfd6ffe89dd1a3e2a581557607b57456/84e3d/adventure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.26975763962066%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBP/EABYBAQEBAAAAAAAAAAAAAAAAAAQCA//aAAwDAQACEAMQAAAB7Y10gshef//EABkQAQADAQEAAAAAAAAAAAAAAAIAAREQMv/aAAgBAQABBQLNKfCrqP3P/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/ARMn/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BRn//xAAZEAACAwEAAAAAAAAAAAAAAAABIQACEBH/2gAIAQEABj8CVXOEYjv/xAAcEAEAAgEFAAAAAAAAAAAAAAABACEREDFBYaH/2gAIAQEAAT8hKSdjmWCBKzjROwnpHef/2gAMAwEAAgADAAAAEMj/AP/EABgRAAIDAAAAAAAAAAAAAAAAAAEQESFB/9oACAEDAQE/ELAicX//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAECAQE/ECDLNX//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhQRAxUXGB/9oACAEBAAE/EAKhuxPbxDOsAVE+cAwhcmoBWDouN1BSCf/Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Adventure time!\"\n        title=\"\"\n        src=\"/static/cfd6ffe89dd1a3e2a581557607b57456/f8fb9/adventure.jpg\"\n        srcset=\"/static/cfd6ffe89dd1a3e2a581557607b57456/e8976/adventure.jpg 148w,\n/static/cfd6ffe89dd1a3e2a581557607b57456/63df2/adventure.jpg 295w,\n/static/cfd6ffe89dd1a3e2a581557607b57456/f8fb9/adventure.jpg 590w,\n/static/cfd6ffe89dd1a3e2a581557607b57456/85e3d/adventure.jpg 885w,\n/static/cfd6ffe89dd1a3e2a581557607b57456/d1924/adventure.jpg 1180w,\n/static/cfd6ffe89dd1a3e2a581557607b57456/9452e/adventure.jpg 1770w,\n/static/cfd6ffe89dd1a3e2a581557607b57456/84e3d/adventure.jpg 1898w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>I’m of the opinion that <strong>bespoke</strong> = <strong>better</strong>. A tailor made suit is\nalways going to be more wearable than something off the shelf at Primark. If I’m\ngoing to be using a piece of software for 30 hours a week or more, it’s got to\nbe right for <strong>me</strong>.\nDevelopers are part craftsperson and part writer. Like the writer, much of the job we do is\nconfined to our own heads. However, unless we choose and maintain the right\ntools for ourselves we will end up working twice as hard for half the\nproductivity.</p>\n<p>In this article I’d like to explain what I’ve done to meet my 3 initial goals\nand hopefully inspire you to modify your working environment to meet <strong>your</strong>\nneeds.</p>\n<h2>The colourscheme</h2>\n<p>Ok, I know that picking a colour may seem like the least important part of\ncustomizing software but getting the colour right on something is low hanging\nfruit. The right colourscheme can make an immediate and profound difference to your experience.\nThat being said, getting your colours right in software that your going to be reviewing\nor editing code in can be a little tricky. Syntax highlighting, comment colours\nand linters all require speific contrasting colours to be able to work\neffectively.\nIt’s pretty easy to modify colours in Terminal’s preferences window, but I was\nkeen to leverage a pre-existing colour palette that had been designed for code\nand hopefully avoid the aforementioned syntax/comment/linter headache.\nI forget where I first saw it, but I’ve been in love with Ethan Schnoover’s\n<a href=\"http://ethanschoonover.com/solarized\">Solarized</a> theme for a long time. There are Solarized themes available as\ndownloads for both Terminal and Vim, making it very easy to setup.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4e0b956505fa6950b536c04285569eaa/b2b55/solarized-dualmode.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 492px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.27642276422764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAB00lEQVQY003LTUzTcBiA8ReMJkZD4kEhzhDQNSpbO5nrNjuYdKMjOg8mGL26eFXjyQvxNA+eNDExxHgyHrzBxbMkKigz6uiiIP1YGS0r/Nv1Y10dWVjFRYPJL8/tAUn46pqiqQmmLuqIt2plUxcMjd+FNlddq9y0paa91umebXvNMUTghS9LUrFaLSHpgy4XUGXeUJYsddnSli204uh8vcY7OlevcXWdtzXO1lZN9NNEK5r6AypS0TZ5a+OTIxd+VVlbXjAri1Zloa4U3A3W3Sy2ba7VqOw0JK/BeS7vbYteS/HaqN1SYV36ttNUNMTLanlLUxxL0Q1Jr0lIk5EqGlvf1fWSIJVY9uPbd29ez7569nI6//TJvfzD3NQULH6eK7LvZ+fnpmdm8s9f3Hn0OPcgf/Xu/UTu9vCNW4HJm8cnrh8imS4iCQQNgSScGQEsBv0hOBUGLHstiKcHwynfWOYIOXp4mIKTBAzi4CcAC/3t2QgM/dEV2EXuC0a7g9GD4QQcTV7G8XEMH8PimdMkMxDP9NOX/Okr/nTWN8L0nqf3hygIRDtie4bIA+co6KWzODGOEfQANeGLpU5QTF+C6Ylc7ImMHruQ7ouluvH4v/k/nfk3DicFA24yvS8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"solarized dual display\"\n        title=\"\"\n        src=\"/static/4e0b956505fa6950b536c04285569eaa/b2b55/solarized-dualmode.png\"\n        srcset=\"/static/4e0b956505fa6950b536c04285569eaa/861e4/solarized-dualmode.png 148w,\n/static/4e0b956505fa6950b536c04285569eaa/77416/solarized-dualmode.png 295w,\n/static/4e0b956505fa6950b536c04285569eaa/b2b55/solarized-dualmode.png 492w\"\n        sizes=\"(max-width: 492px) 100vw, 492px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<blockquote>\n<p>”[The theme has been designed] <em>with both precise <a href=\"http://en.wikipedia.org/wiki/Lab_colour_space\">CIELAB</a> lightness\nrelationships and a refined set of hues based on fixed colour wheel relationships.</em>”</p>\n</blockquote>\n<p>A lot of thought has been put into this colour palette and it shows. The beige\nmight not be to everyone’s taste but it’s great to still be\nable to read my screen at 3am because my IDE <strong>doesn’t look like this:</strong></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/996163a1aff7b6a91f11b84ec5d059e5/79ad4/neonoverload.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 400px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABw1yM0pEy/8QAGRABAAIDAAAAAAAAAAAAAAAAAQACERIh/9oACAEBAAEFAqUGJqLhoxUi9//EABcRAQADAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8BnFv/xAAXEQEAAwAAAAAAAAAAAAAAAAAAERJB/9oACAECAQE/Aa6l/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERIQIQYXH/2gAIAQEABj8CjJ+ERZQ6FzX/xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhUTFB/9oACAEBAAE/IcOefUA0HogOaOpLzDCG1eJc2f/aAAwDAQACAAMAAAAQ7A//xAAXEQADAQAAAAAAAAAAAAAAAAABESEA/9oACAEDAQE/EAdCZBEN/8QAGBEBAQADAAAAAAAAAAAAAAAAAQARITH/2gAIAQIBAT8QC6Ss9b//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMWFxgdH/2gAIAQEAAT8QJQ1pNOmsPuPF5TbPU5yQxPYy7aQPO8DA0AhFNOOtat5z/9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Neon overload\"\n        title=\"\"\n        src=\"/static/996163a1aff7b6a91f11b84ec5d059e5/79ad4/neonoverload.jpg\"\n        srcset=\"/static/996163a1aff7b6a91f11b84ec5d059e5/a7b8e/neonoverload.jpg 148w,\n/static/996163a1aff7b6a91f11b84ec5d059e5/575d0/neonoverload.jpg 295w,\n/static/996163a1aff7b6a91f11b84ec5d059e5/79ad4/neonoverload.jpg 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>If you’d like to explore more themes, take a look at <a href=\"http://terminal.sexy/\">terminal.sexy</a>. Don’t be put\nof by the dubious sounding URL, it’s a web app that allows you to create, preview\nand share Terminal themes. Themes can be downloaded as an XML\nfile and imported it into Terminal through the preferences window.\nOne “gotcha” with this process is that the file can’t be imported unless you\nchange the file extension to <code class=\"language-text\">.terminal</code>.</p>\n<h2>The font</h2>\n<p>Like the colourscheme, I thought this would be a quick win, but I didn’t have the\nSolarized magic bullet.\nChanging the font used in Terminal is as simple as opening the preferences and\nclicking <code class=\"language-text\">change</code> under the font header. Unfortunately the choice of fonts\npresented here that are suitable for code editing is rather limited.\nLuckily there’s a plethora of fonts available for download on the web and this\nquickly opened up my options.</p>\n<p>My font of choice was chopping and changing\npretty regularly until I came across the fantastic <a href=\"https://github.com/bling/vim-airline\">Airline</a> plugin for Vim.\nAirline looks a bit weird (due to missing characters) unless you use one of\nthe 14 patched typefaces in the <a href=\"https://github.com/powerline/fonts\">Powerline fonts</a> repository on github. After\nplaying around with them I ended up using <a href=\"http://www.google.com/fonts/specimen/Droid+Sans+Mono\">Droid sans mono</a>.\nIts chunky, reads well and as an Android owner and Google fanboy I feel right at home.</p>\n<h2>The prompt</h2>\n<p>My prompt remained largely unchanged for a long time until I came across\n<a href=\"http://markdotto.com/2012/10/18/terminal-hotness/\">this article</a> written by the excellent Mark Otto (of Twitter bootstrap fame).\nIn the article he provides a code snippet for your <code class=\"language-text\">.bash_profile</code> to turn your\nstandard prompt into this:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a8c58f288cd49f95ab6b80fd3c657d6/73742/mdo-prompt.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAWklEQVQI132MRw6AIBQFyS9URaMUUYze/5S2tUwmeat5wqFl44CJEAmAEN7FzzZiBM/91KWYay3nuR43m9ZoDCmF9Hz+xw4sO08pccqy7jKEENUceCnsB2rHF8tzBVAwO8aEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Standard bash prompt\"\n        title=\"\"\n        src=\"/static/0a8c58f288cd49f95ab6b80fd3c657d6/40fad/mdo-prompt.png\"\n        srcset=\"/static/0a8c58f288cd49f95ab6b80fd3c657d6/707e9/mdo-prompt.png 148w,\n/static/0a8c58f288cd49f95ab6b80fd3c657d6/649e0/mdo-prompt.png 295w,\n/static/0a8c58f288cd49f95ab6b80fd3c657d6/40fad/mdo-prompt.png 590w,\n/static/0a8c58f288cd49f95ab6b80fd3c657d6/73742/mdo-prompt.png 600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>I loved it and started using it myself straight away. Unfortunately there were a\nfew issues with it. The prompt would fragment or completely disappear when cycling up or\ndown through my command history and I encountered horrible line wrapping issues.</p>\n<p>The issues were mostly resolved in a <a href=\"http://markdotto.com/2013/01/13/improved-terminal-hotness/\">later article</a> and solved entirely by\n<a href=\"https://gist.github.com/clozed2u/4971506#file-gistfile1-sh\">this lovely gist</a>. The follow up included code that would <em>change the colour\nof your working git branch depending on its status</em>.</p>\n<p>This seemingly insignificant feature is incredibly useful. I’m constantly\nreminded to commit my work, resulting in frequent, small commits rather than\nbehemoths where I’ve completely forgotten when, why and what code I’ve changed.</p>\n<p>I coloured the prompt with the help of <a href=\"http://bitmote.com/index.php?post/2012/11/19/Using-ANSI-Color-Codes-to-Colorize-Your-Bash-Prompt-on-Linux\">this wonderful</a> article by Michael\nPlotke and the <a href=\"http://ethanschoonover.com/solarized#the-values\">colour value table</a> on the Solarized site. Here is a basic\nbut handy script I made for displaying the colours.\n(the value need for Terminal is the XTERM column)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># generates an 8 bit color table (256 colors) showing the colors used by</span>\n<span class=\"token comment\"># Ethan Schnoover's Solarized theme</span>\n\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\nSWATCH SOLARIZED HEX     16/8 TERMCOL  XTERM/HEX   L*A*B      RGB         HSB        \"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n------ --------- ------- ---- -------  ----------- ---------- ----------- -----------\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;234m      \\033[m base03    #002b36  8/4 brblack  234 #1c1c1c 15 -12 -12   0  43  54 193 100  21\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;235m      \\033[m base02    #073642  0/4 black    235 #262626 20 -12 -12   7  54  66 192  90  26\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;240m      \\033[m base01    #586e75 10/7 brgreen  240 #585858 45 -07 -07  88 110 117 194  25  46\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;241m      \\033[m base00    #657b83 11/7 bryellow 241 #626262 50 -07 -07 101 123 131 195  23  51\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;244m      \\033[m base0     #839496 12/6 brblue   244 #808080 60 -06 -03 131 148 150 186  13  59\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;245m      \\033[m base1     #93a1a1 14/4 brcyan   245 #8a8a8a 65 -05 -02 147 161 161 180   9  63\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;254m      \\033[m base2     #eee8d5  7/7 white    254 #e4e4e4 92 -00  10 238 232 213  44  11  93\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;230m      \\033[m base3     #fdf6e3 15/7 brwhite  230 #ffffd7 97  00  10 253 246 227  44  10  99\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;136m      \\033[m yellow    #b58900  3/3 yellow   136 #af8700 60  10  65 181 137   0  45 100  71\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;166m      \\033[m orange    #cb4b16  9/3 brred    166 #d75f00 50  50  55 203  75  22  18  89  80\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;160m      \\033[m red       #dc322f  1/1 red      160 #d70000 50  65  45 220  50  47   1  79  86\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;125m      \\033[m magenta   #d33682  5/5 magenta  125 #af005f 50  65 -05 211  54 130 331  74  83\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;61m      \\033[m violet    #6c71c4 13/5 brmagenta 61 #5f5faf 50  15 -45 108 113 196 237  45  77\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;33m      \\033[m blue      #268bd2  4/4 blue      33 #0087ff 55 -10 -45  38 139 210 205  82  82\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;37m      \\033[m cyan      #2aa198  6/6 cyan      37 #00afaf 60 -35 -05  42 161 152 175  74  63\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\\033[48;5;64m      \\033[m green     #859900  2/2 green     64 #5f8700 60 -20  65 133 153   0  68 100  60\"</span>\n<span class=\"token function\">printf</span> <span class=\"token string\">\"\\n\"</span></code></pre></div>\n<p>I was feeling pretty happy with myself at this point; the colourscheme was great,\nthe font was inviting and my bash prompt looked cool and was actually useful to me.</p>\n<p>Unfortunately as soon as I fired up an SSH session I was seeing the “bleurgh”\nprompt again.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c777bc2492dcf54dd2ef433d89ce164/8a142/ssh-bad.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 569px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 3.8664323374340945%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAANklEQVQI12N4/fzG/8/v7v7/+OY2kL7z/9PbO/+/vr/7//2rW/9/fHrw/++3x///fH0EponBAOfsS8gnZTAjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Default ssh prompt\"\n        title=\"\"\n        src=\"/static/1c777bc2492dcf54dd2ef433d89ce164/8a142/ssh-bad.png\"\n        srcset=\"/static/1c777bc2492dcf54dd2ef433d89ce164/3b8d9/ssh-bad.png 148w,\n/static/1c777bc2492dcf54dd2ef433d89ce164/c9c62/ssh-bad.png 295w,\n/static/1c777bc2492dcf54dd2ef433d89ce164/8a142/ssh-bad.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Getting around this problem wasn’t too hard, I set up a git repository for all\nmy dot files (<code class=\"language-text\">.vimrc</code>, <code class=\"language-text\">.bash_profile</code>, etc) and created a bash script to\nsymlink the files to my home directory. Now all I had to do was <code class=\"language-text\">git clone</code> and\nrun my setup script and I could have the same prompt (and Vim config) in my SSH.</p>\n<p>“Lovely” I thought to myself, but now my SSH session looks exactly the same as\nmy normal Terminal session, how am I going to be able to tell the difference?\nWhat if I accidentally kill a production server because I got confused?</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6fdb60d81c6e2ce37db2393f01dcfbf5/859f1/custom-bad.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 314px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 21.337579617834397%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQY02N48+zq/7fPr/3/9OnB/88f7v3/9+3x/z9fH/3/C6TJwQxf3935//X93f+/gIb8+vIQLEiRgf++P/kPwjABSgwDGwgyABlTaigAMWsx1VwaV3cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Custom prompt dissaproves\"\n        title=\"\"\n        src=\"/static/6fdb60d81c6e2ce37db2393f01dcfbf5/859f1/custom-bad.png\"\n        srcset=\"/static/6fdb60d81c6e2ce37db2393f01dcfbf5/b7574/custom-bad.png 148w,\n/static/6fdb60d81c6e2ce37db2393f01dcfbf5/94149/custom-bad.png 295w,\n/static/6fdb60d81c6e2ce37db2393f01dcfbf5/859f1/custom-bad.png 314w\"\n        sizes=\"(max-width: 314px) 100vw, 314px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Solving this problem came in two parts.</p>\n<p>Firstly, I needed to be able to differentiate between a “normal” session and an\nSSH session. I did some digging on <a href=\"http://stackoverflow.com/\">stackoverflow</a> and found this little gem.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">function</span> is_ssh<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -n <span class=\"token string\">\"<span class=\"token variable\">$SSH_CLIENT</span>\"</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span> -n <span class=\"token string\">\"<span class=\"token variable\">$SSH_TTY</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">return</span> 0\n  <span class=\"token comment\"># many other tests omitted</span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token keyword\">case</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ps</span> -o comm<span class=\"token operator\">=</span> -p $PPID<span class=\"token variable\">)</span></span> <span class=\"token keyword\">in</span>\n      sshd<span class=\"token operator\">|</span>*/sshd<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> 0<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n    esac\n  <span class=\"token keyword\">fi</span>\n  <span class=\"token keyword\">return</span> 1\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The function detects SSH environment variables and will return <code class=\"language-text\">true</code> if they are\navailable (indicating an SSH session is active).</p>\n<p>Secondly, I needed to be able to change the output of my prompt based on what type\nof session I’m in. This was fairly straight forward to cobble together. I\ncreated a function that returns a prompt based on the result of <code class=\"language-text\">is_ssh</code> and\nthen assigned it to <code class=\"language-text\">export PS1</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">function</span> get_prompt <span class=\"token punctuation\">{</span>\n  c<span class=\"token operator\">=</span><span class=\"token string\">\"\\[\\033[\"</span>\n  p<span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${c}</span>38;5;136\\]\"</span>\n\n  local_session<span class=\"token operator\">=</span><span class=\"token string\">'\\[\\033[38;5;240m\\]ಠ_ಠ\\[\\e[m\\] \\[\\033[38;5;37m\\]\\W/\\[\\e[m\\]\\[<span class=\"token variable\"><span class=\"token variable\">$(</span>git_color<span class=\"token variable\">)</span></span>\\]<span class=\"token variable\"><span class=\"token variable\">$(</span>git_branch<span class=\"token variable\">)</span></span>\\[\\033[m\\] '</span>\n  ssh_session<span class=\"token operator\">=</span><span class=\"token string\">'\\[\\033[38;5;240m\\]\\u\\[\\033[38;5;37m\\]@\\h\\[\\em\\]\\[\\033[38;5;125m\\] (\\@)\\[\\em\\]\\[\\e[m\\] \\[\\033[38;5;37m\\]\\W/\\[\\e[m\\]\\[<span class=\"token variable\"><span class=\"token variable\">$(</span>git_color<span class=\"token variable\">)</span></span>\\]<span class=\"token variable\"><span class=\"token variable\">$(</span>git_branch<span class=\"token variable\">)</span></span>\\[\\033[m\\] '</span>\n\n  n<span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${c}</span>m]\"</span>\n  <span class=\"token keyword\">if</span> is_ssh<span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">echo</span> -e <span class=\"token string\">\"<span class=\"token variable\">${ssh_session}</span>\"</span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token keyword\">echo</span> -e <span class=\"token string\">\"<span class=\"token variable\">${local_session}</span>\"</span>\n  <span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">export</span> PS1<span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>get_prompt<span class=\"token variable\">)</span></span></code></pre></div>\n<p>The prompt returned by the function when I’m in an SSH session shows the standard\n<code class=\"language-text\">user@host</code> ( <code class=\"language-text\">\\u@\\h</code> ) as well as the current time ( <code class=\"language-text\">\\@</code> ).\nNow I can quickly see if I’m on a remote machine and ensure that no horrible\ncommand line related accidents happen!</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a3e77c29d28c90fe0f8f5e04ed50614/8a142/ssh-better.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 569px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 5.975395430579965%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAQElEQVQI12P49Prm/3cvb/x/9e7u//cfH/z/AMTvP97///3t3f8/n978/+PFrf8/vz76//fb4/9/gPQfKBsXBgDg9kufSGLiVQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A better SSH prompt\"\n        title=\"\"\n        src=\"/static/6a3e77c29d28c90fe0f8f5e04ed50614/8a142/ssh-better.png\"\n        srcset=\"/static/6a3e77c29d28c90fe0f8f5e04ed50614/3b8d9/ssh-better.png 148w,\n/static/6a3e77c29d28c90fe0f8f5e04ed50614/c9c62/ssh-better.png 295w,\n/static/6a3e77c29d28c90fe0f8f5e04ed50614/8a142/ssh-better.png 569w\"\n        sizes=\"(max-width: 569px) 100vw, 569px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>One thing still bugged me about this prompt though. The host name <code class=\"language-text\">ip-172-31-9-157</code>\nis pretty useless to me. I, like many other developers and sysadmins out there, use a\nhost config file to create aliases for the machine I work on. A typical entry in\nthis file looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Host myserver\n  Hostname 123.45.6.78\n  User ec2-user\n  IdentityFile ~/path/to/some/private/key</code></pre></div>\n<p>With this config file I can connect to a machine by typing <code class=\"language-text\">ssh myserver</code> instead of\n<code class=\"language-text\">ssh ec2-user@123.45.6.78</code>. If I could get the prompt to display the alias\nI had set then I would definitely know which server I was one. However this is\nmuch easier said than done and coming up with a clean method of doing it proved\nto be a bit tricky.</p>\n<p>One option would be to <a href=\"http://www.cyberciti.biz/faq/linux-change-hostname/\">change the hostname</a> within the machine itself, however\nthis was something I wanted to avoid for a number of reasons.</p>\n<ul>\n<li>Setting up a hostname on each machine I work on would be massively time consuming and pretty\nboring.</li>\n<li>If I ever changed my local alias I’d have to update the machines hostname.</li>\n<li>If a team mate logged onto a server it could cause problems for them.</li>\n</ul>\n<p>What I needed was an approach that involved as little setup as possible, that left\nthe machines hostname untouched and could update dynamically based on my local\nconfig.</p>\n<p>The solution I came up with feels like a bit of a hack but has been working\nwithout issue.\nIn essence, I use the <code class=\"language-text\">[command]</code> parameter of <code class=\"language-text\">ssh</code> to set a Bash variable\nand then open a new bash session before the SSH connection closes.\nI created a function in my <code class=\"language-text\">.bash_profile</code> called <strong>tunnel</strong> that wraps the ssh command and adds\narguments, passing my hostname alias through the <code class=\"language-text\">[command]</code> parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">function</span> tunnel <span class=\"token punctuation\">{</span>\n  local HOSTALIAS<span class=\"token operator\">=</span><span class=\"token string\">\"'export MYHOSTALIAS=<span class=\"token variable\">$1</span>; /bin/bash -il'\"</span>\n  <span class=\"token function\">ssh</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span> -t \\'<span class=\"token string\">\"<span class=\"token variable\">$HOSTALIAS</span>\"</span>\\'\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In the ssh session bash prompt I replaced the <a href=\"http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/bash-prompt-escape-sequences.html\">“escape sequence”</a> for the current\nmachines hostname (<code class=\"language-text\">\\h</code>) with a function call. This function will return the\nthe value of the variable <code class=\"language-text\">MYHOSTALIAS</code> or the current machines hostname if it\nisn’t available.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">function</span> host_alias <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -z <span class=\"token string\">\"<span class=\"token variable\">$MYHOSTALIAS</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token keyword\">echo</span> -e <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">hostname</span> -s<span class=\"token variable\">)</span></span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token variable\">$MYHOSTALIAS</span>\n  <span class=\"token keyword\">fi</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The resulting prompt string now looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh_session<span class=\"token operator\">=</span><span class=\"token string\">'\\[\\033[38;5;240m\\]\\u\\[\\033[38;5;37m\\]@<span class=\"token variable\"><span class=\"token variable\">$(</span>host_alias<span class=\"token variable\">)</span></span>\\[\\em\\]\\[\\033[38;5;125m\\] (\\@)\\[\\em\\]\\[\\e[m\\] \\[\\033[38;5;37m\\]\\W/\\[\\e[m\\]\\[<span class=\"token variable\"><span class=\"token variable\">$(</span>git_color<span class=\"token variable\">)</span></span>\\]<span class=\"token variable\"><span class=\"token variable\">$(</span>git_branch<span class=\"token variable\">)</span></span>\\[\\033[m\\] '</span></code></pre></div>\n<p>And the rendered bash prompt now looks like this:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4148050c0be713bf48fc97e1c7821eaf/5439f/ssh-bestest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 570px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 4.912280701754386%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAN0lEQVQI12P48OrG/2evb/9//eH+/y/v7v3/9fzW/x+Pb/z/DmT/+fb4/9+vj/7/AeK/IDYRGADohUvO9nz0ywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"The bestest ssh prompt\"\n        title=\"\"\n        src=\"/static/4148050c0be713bf48fc97e1c7821eaf/5439f/ssh-bestest.png\"\n        srcset=\"/static/4148050c0be713bf48fc97e1c7821eaf/2349c/ssh-bestest.png 148w,\n/static/4148050c0be713bf48fc97e1c7821eaf/2eaa1/ssh-bestest.png 295w,\n/static/4148050c0be713bf48fc97e1c7821eaf/5439f/ssh-bestest.png 570w\"\n        sizes=\"(max-width: 570px) 100vw, 570px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Now I have no problem seeing which server I’m on and I’m not going to be annoying\nany co-workers!</p>\n<p>My Terminal <em>feels</em> right for me, it’s really only cosmetic differences that\ni’ve discussed but it’s had a huge difference on my user experience.\nBy making the software my own I’ve ended up with something that\nI actually enjoy using and my work is that much better for it.</p>\n<p>**Read part 2 of this series <a href=\"/terminal-improvement-2\">here</a></p>","frontmatter":{"title":"How to improve your Mac’s terminal part 1","date":"April 17, 2015"}}},"pageContext":{"slug":"/terminal-improvement-1/","previous":null,"next":{"fields":{"slug":"/terminal-improvement-2/"},"frontmatter":{"title":"How to improve your Mac’s terminal part 2 - the prompt"}}}}